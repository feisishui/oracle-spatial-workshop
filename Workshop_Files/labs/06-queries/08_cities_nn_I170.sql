-- Nearest cities to I170SELECT c.city, c.state_abrv, pop90  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom,'sdo_num_res=5') = 'TRUE';-- Nearest cities to I170, limited by distance (11g)SELECT c.city, c.state_abrv, pop90  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom,'sdo_num_res=5 unit=mile distance=150') = 'TRUE';-- Nearest cities to I170, ordered by distance (computed)SELECT c.city, c.state_abrv, pop90,       sdo_geom.sdo_distance (         c.location, i.geom, 0.5, 'unit=mile') distance_in_miles  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom,'sdo_num_res=5') = 'TRUE' ORDER by distance_in_miles;-- Nearest cities to I170, ordered by distance (implicit)SELECT c.city, c.state_abrv, pop90,       sdo_geom.sdo_distance (         c.location, i.geom, 0.5, 'unit=mile') distance_in_miles  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom) = 'TRUE'   AND ROWNUM <= 5;-- Nearest cities to I170, ordered by distance (extracted from operator)SELECT c.city, c.state_abrv, pop90  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom,'sdo_num_res=5, unit=mile', 1) = 'TRUE' ORDER by sdo_nn_distance (1);-- Nearest cities to I170, ordered by distance (extracted from operator, returning distance)SELECT  c.city, c.state_abrv, pop90,       sdo_nn_distance (1) distance_in_miles  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom,'sdo_num_res=5, unit=mile', 1) = 'TRUE' ORDER by distance_in_miles;-- Nearest cities to I170, ordered by distance and limited by distance (10g)SELECT c.city, c.state_abrv, pop90,       sdo_nn_distance (1) distance_in_miles  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom,'sdo_num_res=5, unit=mile', 1) = 'TRUE'   AND sdo_nn_distance (1) <= 150 ORDER by distance_in_miles;-- Nearest cities to I170, ordered by distance and limited by distance (11g)SELECT c.city, c.state_abrv, pop90,       sdo_nn_distance (1) distance_in_miles  FROM us_interstates i,       us_cities c WHERE i.interstate = 'I170'   AND sdo_nn (c.location, i.geom,'sdo_num_res=5, unit=mile distance=150', 1) = 'TRUE' ORDER by distance_in_miles;
